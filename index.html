<style>
  body {
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
    font-family: Arial, sans-serif;
    overflow: hidden;
  }

  .container {
    text-align: center;
    position: relative;
    z-index: 2;
  }

  .cat-container {
    width: 300px;
    height: 300px;
    position: relative;
    animation: bounce 2s infinite;
  }

  .cat {
    width: 100%;
    height: 100%;
    animation: spin 3s linear infinite;
  }

  .controls {
    margin-top: 20px;
    padding: 10px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 15px;
  }

  button {
    padding: 10px 20px;
    margin: 0 10px;
    border: none;
    border-radius: 25px;
    background: #fff;
    cursor: pointer;
    transition: transform 0.2s;
  }

  button:hover {
    transform: scale(1.1);
  }

  .sparkle {
    position: absolute;
    pointer-events: none;
  }

  .music-dot {
    position: absolute;
    width: 10px;
    height: 10px;
    background: white;
    border-radius: 50%;
    transition: all 0.05s ease;
    opacity: 0.8;
  }

  .mini-cat {
    position: absolute;
    width: 30px;
    height: 30px;
    pointer-events: none;
    z-index: 1;
  }

  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
  }

  @keyframes float {
    0% { transform: translate(0, 0) rotate(0deg); }
    100% { transform: translate(var(--moveX), var(--moveY)) rotate(var(--rotation)); }
  }

  .speed-control {
    width: 200px;
    margin: 10px;
  }
</style>
</head>
<body>
<div class="container">
  <div class="cat-container">
    <img src="happy-cat-cat.gif" alt="Spinning Cat" class="cat">
  </div>
  <div class="controls">
    <button onclick="toggleMusic()">Toggle Remix</button>
    <button onclick="toggleNormalVersion()">Toggle Normal</button>
    <button onclick="reverseSpin()">Reverse Spin</button>
    <br>
    <input type="range" min="0.5" max="5" step="0.5" value="3" class="speed-control" oninput="changeSpeed(this.value)">
    <br>
    <span>Speed: <span id="speed-value">3</span>x</span>
  </div>
</div>

<audio id="bgMusic" loop>
  <source src="Happy Cat Remix.mp3" type="audio/mp3">
</audio>

<audio id="normalVersion">
  <source src="videoplayback (2).m4a" type="audio/mp4">
</audio>

<script>
const cat = document.querySelector('.cat');
const remixAudio = document.getElementById('bgMusic');
const normalAudio = document.getElementById('normalVersion');
let isRemixPlaying = false;
let isNormalPlaying = false;
let spinDirection = 1;

// Add mini cats
function createMiniCat() {
  const miniCat = document.createElement('img');
  miniCat.src = 'happy-cat-cat.gif';
  miniCat.className = 'mini-cat';
  
  // Random starting position
  const startX = Math.random() * window.innerWidth;
  const startY = Math.random() * window.innerHeight;
  
  // Random movement
  const moveX = (Math.random() - 0.5) * 300;
  const moveY = (Math.random() - 0.5) * 300;
  const rotation = Math.random() * 360;
  
  miniCat.style.left = startX + 'px';
  miniCat.style.top = startY + 'px';
  miniCat.style.setProperty('--moveX', moveX + 'px');
  miniCat.style.setProperty('--moveY', moveY + 'px');
  miniCat.style.setProperty('--rotation', rotation + 'deg');
  
  miniCat.style.animation = `float ${3 + Math.random() * 4}s linear infinite alternate`;
  
  document.body.appendChild(miniCat);
  
  setTimeout(() => {
    miniCat.remove();
  }, 7000);
}

// Create mini cats periodically
setInterval(createMiniCat, 500);

let audioContext;
let analyser;
let dataArray;
const dots = [];
const NUM_DOTS = 100;

function setupAudioAnalysis(audioElement) {
  if (!audioContext) {
    audioContext = new (window.AudioContext || window.webkitAudioContext)();
  }
  
  analyser = audioContext.createAnalyser();
  const source = audioContext.createMediaElementSource(audioElement);
  source.connect(analyser);
  analyser.connect(audioContext.destination);
  
  analyser.fftSize = 512;
  const bufferLength = analyser.frequencyBinCount;
  dataArray = new Uint8Array(bufferLength);

  if (dots.length === 0) {
    for (let i = 0; i < NUM_DOTS; i++) {
      const dot = document.createElement('div');
      dot.className = 'music-dot';
      dot.style.left = Math.random() * window.innerWidth + 'px';
      dot.style.top = Math.random() * window.innerHeight + 'px';
      document.body.appendChild(dot);
      dots.push({
        element: dot,
        baseX: parseFloat(dot.style.left),
        baseY: parseFloat(dot.style.top),
        velocity: { x: 0, y: 0 }
      });
    }
  }
}

function updateDots() {
  if (analyser) {
    analyser.getByteFrequencyData(dataArray);
    
    dots.forEach((dot, index) => {
      const freqIndex = Math.floor(index * (dataArray.length / dots.length));
      const value = dataArray[freqIndex];
      const scale = 1 + (value / 128) * 3;
      const hue = (value + index * 3) % 360;
      const brightness = 50 + (value / 256) * 50;
      
      dot.velocity.x += (Math.random() - 0.5) * (value / 256) * 2;
      dot.velocity.y += (Math.random() - 0.5) * (value / 256) * 2;
      
      dot.velocity.x *= 0.95;
      dot.velocity.y *= 0.95;
      
      const newX = dot.baseX + dot.velocity.x;
      const newY = dot.baseY + dot.velocity.y;
      
      dot.element.style.transform = `translate(${dot.velocity.x}px, ${dot.velocity.y}px) scale(${scale})`;
      dot.element.style.backgroundColor = `hsl(${hue}, 100%, ${brightness}%)`;
      dot.element.style.opacity = 0.3 + (value / 256) * 0.7;
      dot.element.style.boxShadow = `0 0 ${value / 10}px hsl(${hue}, 100%, ${brightness}%)`;
    });
  }
  requestAnimationFrame(updateDots);
}

function createSparkle() {
  const sparkle = document.createElement('div');
  sparkle.className = 'sparkle';
  sparkle.style.left = Math.random() * window.innerWidth + 'px';
  sparkle.style.top = Math.random() * window.innerHeight + 'px';
  sparkle.style.width = '2px';
  sparkle.style.height = '2px';
  sparkle.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
  document.body.appendChild(sparkle);

  setTimeout(() => {
    sparkle.remove();
  }, 1000);
}

setInterval(createSparkle, 50);

function toggleMusic() {
  if (isNormalPlaying) {
    normalAudio.pause();
    isNormalPlaying = false;
  }
  if (isRemixPlaying) {
    remixAudio.pause();
    isRemixPlaying = false;
  } else {
    if (!audioContext) {
      setupAudioAnalysis(remixAudio);
      updateDots();
    }
    remixAudio.play();
    isRemixPlaying = true;
  }
}

function toggleNormalVersion() {
  if (isRemixPlaying) {
    remixAudio.pause();
    isRemixPlaying = false;
  }
  if (isNormalPlaying) {
    normalAudio.pause();
    isNormalPlaying = false;
  } else {
    if (!audioContext) {
      setupAudioAnalysis(normalAudio);
      updateDots();
    }
    normalAudio.play();
    isNormalPlaying = true;
  }
}

function reverseSpin() {
  spinDirection *= -1;
  cat.style.animation = `spin 3s linear infinite`;
  cat.style.animationDirection = spinDirection === 1 ? 'normal' : 'reverse';
}

function changeSpeed(speed) {
  document.getElementById('speed-value').textContent = speed;
  cat.style.animation = `spin ${3/speed}s linear infinite`;
  cat.style.animationDirection = spinDirection === 1 ? 'normal' : 'reverse';
}

document.addEventListener('visibilitychange', () => {
  if (document.hidden) {
    if (isRemixPlaying) remixAudio.pause();
    if (isNormalPlaying) normalAudio.pause();
  } else {
    if (isRemixPlaying) remixAudio.play();
    if (isNormalPlaying) normalAudio.play();
  }
});
</script>
</body></html>
<title>Bear 5 - Survive the Night</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    background: #000;
    color: white;
    font-family: 'Courier New', monospace;
    overflow: hidden;
    cursor: url('IMG_0201.png'), auto;
  }

  #title-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #000;
    display: flex;
    z-index: 1000;
  }

  .title-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding-left: 10%;
  }

  #title-screen h1 {
    font-size: 72px;
    margin-bottom: 50px;
    text-shadow: 0 0 10px rgba(255,0,0,0.5);
    animation: pulse 2s infinite;
  }

  .title-btn {
    font-size: 32px;
    padding: 15px 30px;
    margin: 10px;
    background: none;
    border: none;
    color: #888;
    cursor: pointer;
    transition: all 0.3s ease;
    font-family: 'Courier New', monospace;
    text-align: left;
    width: fit-content;
  }

  .title-btn:hover {
    color: #fff;
    text-shadow: 0 0 10px rgba(255,255,255,0.5);
  }

  .title-bear {
    flex: 1;
    background-image: url('Bear_5.webp');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center right;
    filter: brightness(30%) contrast(120%);
  }

  #newspaper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #e6ddd1;
    padding: 30px;
    width: 80%;
    max-width: 600px;
    color: #333;
    font-family: 'Times New Roman', serif;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
    display: none;
    z-index: 1001;
  }

  #newspaper h2 {
    font-size: 28px;
    margin-bottom: 20px;
    text-align: center;
    font-weight: bold;
    text-transform: uppercase;
    border-bottom: 2px solid #333;
    padding-bottom: 10px;
  }

  #newspaper p {
    font-size: 18px;
    line-height: 1.5;
    margin-bottom: 15px;
  }

  #newspaper-close {
    position: absolute;
    top: 10px;
    right: 10px;
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #333;
  }

  #loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #000;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 1002;
    display: none;
  }

  #loading-text {
    font-size: 48px;
    margin-bottom: 30px;
    animation: pulse 2s infinite;
  }

  #loading-progress {
    width: 300px;
    height: 30px;
    background: #222;
    border: 2px solid #444;
  }

  #progress-bar {
    width: 0%;
    height: 100%;
    background: #666;
    transition: width 0.3s ease;
  }

  #play-button {
    margin-top: 30px;
    font-size: 32px;
    padding: 15px 30px;
    background: none; 
    border: none;
    color: #888;
    cursor: pointer;
    font-family: 'Courier New', monospace;
    display: none;
  }

  #play-button:hover {
    color: #fff;
    text-shadow: 0 0 10px rgba(255,255,255,0.5);
  }

  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }

  #game-container {
    position: relative;
    width: 100vw;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  #office {
    width: 800px;
    height: 600px;
    background: linear-gradient(0deg, #111 0%, #222 100%);
    position: relative;
    border: 4px solid #333;
  }

  #camera-btn {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 20px;
    background: none;
    border: none;
    color: white;
    cursor: pointer;
    z-index: 100;
    font-family: 'Courier New', monospace;
    font-size: 24px;
    letter-spacing: 2px;
    text-transform: uppercase;
  }

  #camera-view {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #111;
    display: none;
    z-index: 90;
  }

  #static-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.3;
    pointer-events: none;
    z-index: 91;
    background: url('data:image/svg+xml,<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noise)" opacity="0.5"/></svg>');
  }

  #hallway {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('The_Office_2_No_Flashlight.webp') center center/cover;
    perspective: 1000px;
    filter: contrast(120%) brightness(40%) blur(1px);
    image-rendering: pixelated;
  }

  #hallway::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
      0deg,
      rgba(0, 0, 0, 0.1),
      rgba(0, 0, 0, 0.1) 2px,
      transparent 2px,
      transparent 4px
    );
    pointer-events: none;
  }

  #bear {
    display: none;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 200px;
    height: 300px;
    background-image: url('Bear_5.webp');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    transition: all 0.3s ease;
    filter: brightness(50%) contrast(150%);
  }

  #eyes-closed {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    z-index: 200;
  }

  #close-eyes {
    position: absolute;
    bottom: 20px;
    right: 20px;
    padding: 10px 20px;
    background: #444;
    border: none;
    color: white;
    cursor: pointer;
  }

  #controls-info {
    position: absolute;
    bottom: 20px;
    right: 150px;
    color: #666;
    font-size: 14px;
  }

  #power {
    position: absolute;
    top: 20px;
    left: 20px;
    font-size: 24px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
  }

  #time {
    position: absolute;
    top: 20px;
    right: 20px;
    font-size: 24px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
  }

  #watch {
    position: fixed;
    bottom: 20%;
    left: 50%;
    transform: translate(-50%, 0) scale(0);
    background: #222;
    border: 4px solid #444;
    border-radius: 50%;
    width: 150px;
    height: 150px;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: transform 0.3s ease;
    z-index: 95;
  }

  #watch.active {
    transform: translate(-50%, 0) scale(1);
  }

  #watch-time {
    color: #0f0;
    font-family: "Courier New", monospace;
    font-size: 24px;
    text-shadow: 0 0 5px #0f0;
  }

  .crt-effect {
    animation: flicker 0.15s infinite;
  }

  @keyframes flicker {
    0% { opacity: 0.95; }
    50% { opacity: 1; }
    100% { opacity: 0.95; }
  }

  #jumpscare {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 2000;
    background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    display: none;
  }

  #jumpscare-img {
    width: 100vw;
    height: 100vh;
    object-fit: cover;
    animation: shake 0.1s infinite;
  }

  @keyframes shake {
    0% { transform: translate(0, 0) scale(1.1); }
    25% { transform: translate(10px, 10px) scale(1.2); }
    50% { transform: translate(-10px, -10px) scale(1.3); }
    75% { transform: translate(-10px, 10px) scale(1.2); }
    100% { transform: translate(10px, -10px) scale(1.1); }
  }

  #game-over {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 1999;
    background: #000;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    display: none;
  }

  .incident-text {
    color: #f00;
    font-size: 48px;
    font-family: 'Courier New', monospace;
    text-transform: uppercase;
    position: absolute;
    animation: floatText 4s linear infinite;
    opacity: 0;
    transform: scale(0);
    text-shadow: 0 0 10px #f00;
  }

  @keyframes floatText {
    0% {
      opacity: 0;
      transform: scale(0) rotate(0deg);
    }
    10% {
      opacity: 1;
      transform: scale(1) rotate(-5deg);
    }
    90% {
      opacity: 1;
      transform: scale(2) rotate(5deg);
    }
    100% {
      opacity: 0;
      transform: scale(3) rotate(0deg);
    }
  }

  #forced-eyes-message {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 48px;
    color: red;
    z-index: 201;
    animation: shake 0.1s infinite;
  }

  #final-newspaper {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #e6ddd1;
    padding: 30px;
    width: 80%;
    max-width: 600px;
    color: #333;
    z-index: 2001;
  }

  #credits {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: black;
    color: white;
    z-index: 2002;
    text-align: center;
    padding-top: 20vh;
  }

  #credits h1 {
    font-size: 72px;
    margin-bottom: 50px;
    animation: fadeInOut 5s linear;
  }

  .credit-item {
    font-size: 36px;
    opacity: 0;
    animation: fadeInOut 5s linear;
  }

  #extras-menu {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: black;
    z-index: 2003;
    padding: 50px;
  }

  .extras-btn {
    font-size: 32px;
    color: #888;
    background: none;
    border: none;
    margin: 20px;
    cursor: pointer;
    display: block;
    text-align: left;
    padding: 10px;
    width: 300px;
  }

  .extras-btn.selected {
    color: white;
    text-shadow: 0 0 10px rgba(255,255,255,0.5);
    position: relative;
  }

  .extras-btn.selected::before {
    content: '>';
    position: absolute;
    left: -20px;
  }

  .extras-btn:hover {
    color: white;
  }

  @keyframes fadeInOut {
    0%, 100% { opacity: 0; }
    20%, 80% { opacity: 1; }
  }

  #static-screen {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: url('data:image/svg+xml,<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noise)" opacity="0.5"/></svg>');
    z-index: 1999;
  }
  
  #bear5-viewer {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #222;
    padding: 20px;
    border: 2px solid #444;
    z-index: 2004;
  }

  #bear5-viewer img {
    width: 400px;
    height: auto;
    display: block;
    margin-bottom: 20px;
  }

  .slider-container {
    margin: 10px 0;
  }

  .slider-container label {
    display: inline-block;
    width: 100px;
    color: #fff;
  }

  .slider-container input {
    width: 200px;
  }

  #sound-test-panel {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #222;
    padding: 20px;
    border: 2px solid #444;
    z-index: 2004;
  }

  .sound-btn {
    display: block;
    width: 200px;
    margin: 10px 0;
    padding: 10px;
    background: #444;
    border: none;
    color: white;
    cursor: pointer;
  }

  .sound-btn:hover {
    background: #666;
  }

  #viewer-close, #sound-test-close {
    position: absolute;
    top: 10px;
    right: 10px;
    background: none;
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
  }
</style>

<audio id="clickSound" preload="auto">
  <source src="click.wav" type="audio/wav">
</audio>
<audio id="jumpscareSound">
  <source src="bear5-jumpscare-made-with-Voicemod.mp3" type="audio/mpeg">
</audio>
<audio id="creditsMusic">
  <source src="Relaxed Scene.mp3" type="audio/mp3">
</audio>
</head>
<body>
<div id="newspaper">
  <button id="newspaper-close">&#xd7;</button>
  <h2>HELP WANTED at BEAR5&apos;s 5WORLD!!!</h2>
  <p>WANT JOB??? come work at BEAR5 5WORLD!!! we give many money for watch bear at night!!! very safe job (maybe)!!!</p>
  <p>PAY is &#x24;5.55 per hour!!! you get free pizza maybe if bear5 no eat it first LOL!!!</p>
  <p>REQUIREMENTS:
    - must have eyes (for closing them)
    - must know how camera work
    - must be alive (for now)
    - no ask questions about bear5!!!</p>
  <p>apply now at 555 bear5 street!!! or maybe dont??? (but we need guard very badly plz come)</p>
</div>

<div id="title-screen">
  <div class="title-content">
    <h1>BEAR 5</h1>
    <button class="title-btn" id="start-btn">Begin5</button>
    <button class="title-btn" id="escape-btn">Escape</button>
    <button class="title-btn" id="news-btn">Help Wanted</button>
    <button class="title-btn" id="extras-btn" style="display: none;">Extras</button>
  </div>
  <div class="title-bear"></div>
</div>

<div id="game-container">
  <div id="office" class="crt-effect">
    <div id="power">Power: 100%</div>
    <div id="time">0:00 AM</div>
    <div id="hallway">
      <div id="bear"></div>
    </div>
    <div id="camera-view">
      <div id="static-overlay"></div>
    </div>
    <div id="eyes-closed"></div>
    <button id="camera-btn">CAMERA</button>
    <button id="close-eyes">Close Eyes</button>
    <div id="controls-info">Press &apos;E&apos; to toggle eyes</div>
    <div id="watch">
      <div id="watch-time">0:00 AM</div>
    </div>
  </div>
</div>

<div id="loading-screen">
  <div id="loading-text">Loading Night...</div>
  <div id="loading-progress">
    <div id="progress-bar"></div>
  </div>
  <button id="play-button">START NIGHT</button>
</div>

<div id="jumpscare" style="display:none">
  <img src="bear5-explanation-v0-8ca5acccnw6e1.webp" id="jumpscare-img">
</div>

<div id="game-over" style="display:none">
  <div class="incident-text" style="animation-delay: 0s;">BEAR5 INCIDENT LOG - GUARD #555</div>
  <div class="incident-text" style="animation-delay: 0.5s;">GUARD NOT SURVIVE!!!! BEAR5 VERY ANGRY!!!</div>
  <div class="incident-text" style="animation-delay: 1s;">BLOOD ON FLOOR!! SO MUCH RED!!!!!</div>
  <div class="incident-text" style="animation-delay: 1.5s;">WHY GUARD LOOK AT BEAR5??? TOLD NOT TO!!!</div>
  <div class="incident-text" style="animation-delay: 2s;">BEAR5 TEETH VERY SHARP NOW.... OOPS!!!</div>
  <div class="incident-text" style="animation-delay: 2.5s;">NEED NEW GUARD AGAIN... AND NEW FLOOR!!!</div>
</div>

<div id="forced-eyes-message">OPEN YOUR EYES NOW!!!</div>
<div id="final-newspaper">
  <h2>BREAKING NEWS!!!!</h2>
  <p>GUARD FOUND DED AT BEAR5 5WORLD!!!! POLICE DO INVESTEGATE BUT BEAR5 SAY NO COMMENT!!!! MORE NEWS LATER MAYBE!!!!</p>
</div>
<div id="credits">
  <h1>BEAR 5</h1>
  <div class="credit-item" style="animation-delay: 5s">MADE BY: BEAR5</div>
  <div class="credit-item" style="animation-delay: 10s">PROGRAMED BY: BEAR5</div>
  <div class="credit-item" style="animation-delay: 15s">DIRECTED BY: BEAR5</div>
  <div class="credit-item" style="animation-delay: 20s">BEAR5 IS: BEAR5</div>
</div>
<div id="extras-menu">
  <button class="extras-btn" id="view-animatronic">VIEW BEAR5</button>
  <button class="extras-btn" id="view-jumpscare">VIEW JUMPSCARE</button>
  <button class="extras-btn" id="play-credits">PLAY CREDITS</button>
  <button class="extras-btn" id="sound-test">SOUND TEST</button>
  <button class="extras-btn" id="back-to-menu">BACK TO MENU</button>
</div>
<div id="static-screen"></div>
<div id="bear5-viewer">
  <button id="viewer-close">×</button>
  <img src="Bear_5.webp" id="bear5-preview">
  <div class="slider-container">
    <label>Brightness:</label>
    <input type="range" id="brightness" min="0" max="200" value="100">
  </div>
  <div class="slider-container">
    <label>Contrast:</label>
    <input type="range" id="contrast" min="0" max="200" value="100">
  </div>
  <div class="slider-container">
    <label>Red:</label>
    <input type="range" id="red" min="0" max="200" value="100">
  </div>
  <div class="slider-container">
    <label>Green:</label>
    <input type="range" id="green" min="0" max="200" value="100">
  </div>
  <div class="slider-container">
    <label>Blue:</label>
    <input type="range" id="blue" min="0" max="200" value="100">
  </div>
</div>

<div id="sound-test-panel">
  <button id="sound-test-close">×</button>
  <button class="sound-btn" id="test-click">Test Click</button>
  <button class="sound-btn" id="test-jumpscare">Test Jumpscare</button>
  <button class="sound-btn" id="test-music">Play/Pause Music</button>
</div>

<script>const game = {
  power: 100,
  time: 0,
  isUsingCamera: false,
  eyesClosed: false,
  bearActive: false,
  gameOver: false,
  bearPosition: 0,
  lookTimer: null,
  clickSound: null,
  loadingComplete: false,
  watchVisible: false,
  jumpscareSound: null,
  jumpscareActive: false,
  creditsMusic: null,
  extrasUnlocked: false,
  forcedEyesClose: false,
  powerOutTime: null,
  creditsPlaying: false,
  selectedExtrasOption: 0,
  extrasMenuActive: false,
  init() {
    this.clickSound = document.getElementById('clickSound');
    this.jumpscareSound = document.getElementById('jumpscareSound');
    this.creditsMusic = document.getElementById('creditsMusic');
    this.creditsMusic.playbackRate = 0.5;
    this.jumpscareActive = false;
    if (window.localStorage.getItem('extrasUnlocked') === 'true') {
      this.extrasUnlocked = true;
      document.getElementById('extras-btn').style.display = 'block';
    }
    this.setupEventListeners();
    document.getElementById('game-container').style.display = 'none';
    document.querySelectorAll('.incident-text').forEach((text, i) => {
      text.style.animationDelay = `${i * 0.5}s`;
    });
  },
  setupEventListeners() {
    const buttons = document.querySelectorAll('button');
    buttons.forEach(button => {
      button.addEventListener('click', () => {
        this.clickSound.currentTime = 0;
        this.clickSound.play();
      });
    });
    document.getElementById('camera-btn').addEventListener('click', () => this.toggleCamera());
    document.getElementById('close-eyes').addEventListener('click', () => this.toggleEyes());
    document.getElementById('start-btn').addEventListener('click', () => this.startGame());
    document.getElementById('escape-btn').addEventListener('click', () => {});
    document.getElementById('news-btn').addEventListener('click', () => {
      document.getElementById('newspaper').style.display = 'block';
    });
    document.getElementById('newspaper-close').addEventListener('click', () => {
      document.getElementById('newspaper').style.display = 'none';
    });
    document.addEventListener('keydown', e => {
      if (e.key.toLowerCase() === 'e') {
        this.toggleEyes();
      }
      if (e.key === ' ') {
        e.preventDefault();
        this.toggleWatch();
      }
      if (this.extrasMenuActive) {
        if (e.key === 'ArrowUp') {
          this.navigateExtrasMenu(-1);
        } else if (e.key === 'ArrowDown') {
          this.navigateExtrasMenu(1);
        } else if (e.key === 'Enter') {
          this.selectExtrasOption();
        }
      }
    });
    document.getElementById('view-animatronic').addEventListener('click', () => this.showAnimatronic());
    document.getElementById('view-jumpscare').addEventListener('click', () => this.showJumpscare());
    document.getElementById('play-credits').addEventListener('click', () => this.playCredits());
    document.getElementById('sound-test').addEventListener('click', () => this.soundTest());
    document.getElementById('back-to-menu').addEventListener('click', () => this.backToMenu());
    document.getElementById('extras-btn').addEventListener('click', () => {
      if (this.extrasUnlocked) {
        this.showExtrasMenu();
      }
    });
  },
  startGame() {
    document.getElementById('title-screen').style.display = 'none';
    document.getElementById('loading-screen').style.display = 'flex';
    let progress = 0;
    const progressBar = document.getElementById('progress-bar');
    const playButton = document.getElementById('play-button');
    const loadingInterval = setInterval(() => {
      progress += Math.random() * 15;
      if (progress >= 100) {
        progress = 100;
        clearInterval(loadingInterval);
        playButton.style.display = 'block';
        this.loadingComplete = true;
      }
      progressBar.style.width = `${progress}%`;
    }, 500);
    playButton.addEventListener('click', () => {
      if (this.loadingComplete) {
        this.clickSound.currentTime = 0;
        this.clickSound.play();
        document.getElementById('loading-screen').style.display = 'none';
        document.getElementById('game-container').style.display = 'flex';
        this.gameLoop = setInterval(() => this.update(), 1000);
        this.bearLoop = setInterval(() => this.updateBear(), 3000);
      }
    });
  },
  update() {
    if (this.gameOver) return;
    if (this.isUsingCamera) this.power -= 1;
    if (this.power <= 0) this.powerOutSequence();
    if (this.time >= 180) {
      this.powerOutSequence();
      return;
    }
    if (this.forcedEyesClose && Date.now() - this.powerOutTime > 8000) {
      document.getElementById('forced-eyes-message').style.display = 'block';
    }
    this.time++;
    document.getElementById('power').textContent = `Power: ${this.power}%`;
    const hour = Math.floor(this.time / 60);
    document.getElementById('time').textContent = `${hour}:00 AM`;
    const watch = document.getElementById('watch-time');
    watch.textContent = `${hour}:00 AM`;
    if (this.bearActive && !this.eyesClosed) {
      if (!this.lookTimer) {
        this.lookTimer = setTimeout(() => this.endGame(), 2000);
      }
    } else if (this.lookTimer) {
      clearTimeout(this.lookTimer);
      this.lookTimer = null;
    }
  },
  updateBear() {
    if (this.gameOver) return;
    if (Math.random() < 0.3) {
      this.bearActive = true;
      this.bearPosition = Math.random() < 0.5 ? 1 : 2;
      const bear = document.getElementById('bear');
      bear.style.display = 'block';
      bear.style.transform = `translate(-50%, -50%) scale(${this.bearPosition === 1 ? 0.5 : 1})`;
    } else {
      this.bearActive = false;
      this.bearPosition = 0;
      document.getElementById('bear').style.display = 'none';
    }
  },
  toggleCamera() {
    if (this.power <= 0) return;
    this.clickSound.currentTime = 0;
    this.clickSound.play();
    this.isUsingCamera = !this.isUsingCamera;
    document.getElementById('camera-view').style.display = this.isUsingCamera ? 'block' : 'none';
  },
  toggleEyes() {
    this.clickSound.currentTime = 0;
    this.clickSound.play();
    this.eyesClosed = !this.eyesClosed;
    document.getElementById('eyes-closed').style.display = this.eyesClosed ? 'block' : 'none';
    if (this.forcedEyesClose && !this.eyesClosed) {
      setTimeout(() => {
        document.getElementById('static-screen').style.display = 'block';
        if (!this.jumpscareActive) {
          this.jumpscareActive = true;
          this.jumpscareSound.currentTime = 0;
          this.jumpscareSound.play();
          setTimeout(() => {
            document.getElementById('final-newspaper').style.display = 'block';
            setTimeout(() => this.startCredits(), 5000);
          }, 2000);
        }
      }, 1000);
    }
  },
  toggleWatch() {
    this.watchVisible = !this.watchVisible;
    const watch = document.getElementById('watch');
    watch.classList.toggle('active', this.watchVisible);
    if (this.watchVisible) {
      this.clickSound.currentTime = 0;
      this.clickSound.play();
      setTimeout(() => {
        this.watchVisible = false;
        watch.classList.remove('active');
      }, 2000);
    }
  },
  endGame() {
    this.gameOver = true;
    clearInterval(this.gameLoop);
    clearInterval(this.bearLoop);
    if (this.lookTimer) {
      clearTimeout(this.lookTimer);
    }
    document.getElementById('jumpscare').style.display = 'flex';
    setTimeout(() => {
      document.getElementById('jumpscare').style.display = 'none';
      document.getElementById('game-over').style.display = 'flex';
    }, 2000);
    setTimeout(() => {
      const wasUnlocked = window.localStorage.getItem('extrasUnlocked') === 'true';
      if (!wasUnlocked) {
        window.localStorage.setItem('extrasUnlocked', 'false');
      }
      location.reload();
    }, 8000);
  },
  powerOutSequence() {
    this.power = 0;
    this.powerOutTime = Date.now();
    this.forcedEyesClose = true;
    this.toggleEyes();
    document.getElementById('close-eyes').disabled = true;
    setTimeout(() => {
      if (this.eyesClosed) {
        document.getElementById('bear').style.display = 'block';
        document.getElementById('bear').style.transform = 'translate(-50%, -50%) scale(2)';
      }
    }, 8000);
  },
  startCredits() {
    document.getElementById('final-newspaper').style.display = 'none';
    document.getElementById('credits').style.display = 'block';
    this.creditsMusic.play();
    this.creditsPlaying = true;
    setTimeout(() => {
      this.creditsPlaying = false;
      document.getElementById('credits').style.display = 'none';
      this.extrasUnlocked = true;
      const wasUnlocked = this.extrasUnlocked;
      window.localStorage.setItem('extrasUnlocked', 'true');
      location.reload();
    }, 25000);
  },
  showAnimatronic() {
    const viewer = document.getElementById('bear5-viewer');
    viewer.style.display = 'block';
  
    const preview = document.getElementById('bear5-preview');
    const updateFilters = () => {
      const brightness = document.getElementById('brightness').value;
      const contrast = document.getElementById('contrast').value;
      const red = document.getElementById('red').value;
      const green = document.getElementById('green').value;
      const blue = document.getElementById('blue').value;
      
      preview.style.filter = `brightness(${brightness}%) contrast(${contrast}%) 
        sepia(1) hue-rotate(${Math.atan2(blue-red, green-red)*180/Math.PI}deg) 
        saturate(${Math.max(red,green,blue)}%)`;
    };

    document.querySelectorAll('#bear5-viewer input').forEach(input => {
      input.addEventListener('input', updateFilters);
    });

    document.getElementById('viewer-close').addEventListener('click', () => {
      viewer.style.display = 'none';
    });
  },
  showJumpscare() {
    document.getElementById('jumpscare').style.display = 'flex';
    this.jumpscareSound.currentTime = 0;
    this.jumpscareSound.play();
    setTimeout(() => {
      document.getElementById('jumpscare').style.display = 'none';
    }, 2000);
  },
  soundTest() {
    const panel = document.getElementById('sound-test-panel');
    panel.style.display = 'block';

    document.getElementById('test-click').addEventListener('click', () => {
      this.clickSound.currentTime = 0;
      this.clickSound.play();
    });

    document.getElementById('test-jumpscare').addEventListener('click', () => {
      this.jumpscareSound.currentTime = 0;
      this.jumpscareSound.play();
    });

    document.getElementById('test-music').addEventListener('click', () => {
      if (this.creditsMusic.paused) {
        this.creditsMusic.play();
      } else {
        this.creditsMusic.pause();
      }
    });

    document.getElementById('sound-test-close').addEventListener('click', () => {
      panel.style.display = 'none';
      this.creditsMusic.pause();
      this.creditsMusic.currentTime = 0;
    });
  },
  playCredits() {
    this.startCredits();
  },
  backToMenu() {
    document.getElementById('extras-menu').style.display = 'none';
    document.getElementById('title-screen').style.display = 'flex';
  },
  showExtrasMenu() {
    this.extrasMenuActive = true;
    document.getElementById('extras-menu').style.display = 'block';
    document.getElementById('title-screen').style.display = 'none';
    this.selectedExtrasOption = 0;
    this.updateExtrasSelection();
  },
  navigateExtrasMenu(direction) {
    const buttons = document.querySelectorAll('.extras-btn');
    this.selectedExtrasOption = (this.selectedExtrasOption + direction + buttons.length) % buttons.length;
    this.updateExtrasSelection();
  },
  updateExtrasSelection() {
    const buttons = document.querySelectorAll('.extras-btn');
    buttons.forEach((btn, index) => {
      btn.classList.toggle('selected', index === this.selectedExtrasOption);
    });
  },
  selectExtrasOption() {
    const options = ['view-animatronic', 'view-jumpscare', 'play-credits', 'sound-test', 'back-to-menu'];
    const selectedId = options[this.selectedExtrasOption];
    document.getElementById(selectedId).click();
  }
};
game.init();</script>
</body></html>
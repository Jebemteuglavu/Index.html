:root {
  --primary: #FFD700;
  --secondary: #FF6B6B;
}

body {
  margin: 0;
  padding: 20px;
  font-family: Arial, sans-serif;
  background: #2c3e50;
  display: flex;
  flex-direction: column;
  align-items: center;
  height: 100vh;
  overflow-y: hidden;
}

.game-container {
  position: relative;
  width: 800px;
  height: 400px;
  overflow: hidden;
  background: linear-gradient(to bottom, #87CEEB, #4682B4);
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

.cityscape {
  position: absolute;
  bottom: 100px;
  width: 100%;
  height: 200px;
}

.ground {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 60px;
  background: #666;
  background-image: 
    linear-gradient(90deg, white 0%, white 10%, transparent 10%),
    linear-gradient(#666 0%, #666 100%);
  background-size: 100px 10px, 100% 100%;
  background-position: center;
  background-repeat: repeat-x;
}

.player {
  position: absolute;
  width: 40px;
  height: 80px;
  z-index: 1000;
}

.dog {
  width: 60px;
  height: 60px;
  position: absolute;
  cursor: pointer;
  transition: transform 0.2s;
}

.dog:hover {
  transform: scale(1.1);
}

.stats {
  background: #fff;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  margin-bottom: 20px;
  width: 100%;
  max-width: 300px;
}

.controls {
  display: flex;
  gap: 20px;
  margin: 20px 0;
}

.building {
  width: 100px;
  height: 100px;
  cursor: pointer;
  transition: transform 0.2s;
}

.building:hover {
  transform: scale(1.1);
}

.upgrade-menu {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: white;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 0 20px rgba(0,0,0,0.5);
  z-index: 1001;
}

.upgrade-menu.active {
  display: block;
}

.overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  z-index: 1000;
}

.overlay.active {
  display: block;
}

.upgrade-button {
  display: block;
  width: 100%;
  padding: 10px;
  margin: 10px 0;
  background: var(--primary);
  border: none;
  border-radius: 5px;
  cursor: pointer;
  transition: background 0.2s;
}

.upgrade-button:hover {
  background: #FFE44D;
}

.upgrade-button:disabled {
  background: #ccc;
  cursor: not-allowed;
}

.close-button {
  position: absolute;
  top: 10px;
  right: 10px;
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
}
</style></head><body>
<div class="stats">
  <h2>Stats</h2>
  <p>Money: $<span id="money">0</span></p>
  <p>Dog Limit: <span id="dogLimit">3</span></p>
  <p>Current Dogs: <span id="currentDogs">0</span></p>
</div>

<div class="controls">
  <div class="building" id="shop">
    <svg viewBox="0 0 100 100">
      <rect x="10" y="40" width="80" height="50" fill="#FFD700"/>
      <polygon points="5,40 50,10 95,40" fill="#FFD700"/>
      <rect x="30" y="60" width="40" height="30" fill="#FF6B6B"/>
      <text x="50" y="80" text-anchor="middle" fill="white">SHOP</text>
    </svg>
  </div>
  
  <div class="building" id="sellBin">
    <svg viewBox="0 0 100 100">
      <rect x="20" y="20" width="60" height="70" fill="#666"/>
      <rect x="15" y="15" width="70" height="10" fill="#888"/>
      <text x="50" y="60" text-anchor="middle" fill="white">SELL</text>
    </svg>
  </div>
</div>

<div class="overlay" id="overlay"></div>
<div class="upgrade-menu" id="upgradeMenu">
  <button class="close-button" id="closeUpgrade">Ã—</button>
  <h2>Upgrades Shop</h2>
  <button class="upgrade-button" id="upgradeDogLimit">
    Increase Dog Limit (50$)
  </button>
  <button class="upgrade-button" id="upgradePettingSpeed">
    Faster Petting Progress (100$)
  </button>
  <button class="upgrade-button" id="upgradeAutoCollect">
    Auto-Collect Ready Dogs (200$)
  </button>
</div>

<div class="game-container">
  <div class="cityscape">
    <svg width="100%" height="100%" preserveAspectRatio="none">
      <rect x="5%" y="30%" width="10%" height="70%" fill="#465366"/>
      <rect x="20%" y="10%" width="15%" height="90%" fill="#364356"/>
      <rect x="40%" y="20%" width="12%" height="80%" fill="#465366"/>
      <rect x="60%" y="15%" width="10%" height="85%" fill="#364356"/>
      <rect x="75%" y="25%" width="15%" height="75%" fill="#465366"/>
      <pattern id="windows" patternUnits="userSpaceOnUse" width="20" height="20">
        <rect width="8" height="8" fill="#FDD835" x="2" y="2"/>
      </pattern>
      <rect x="5%" y="30%" width="10%" height="70%" fill="url(#windows)" opacity="0.3"/>
      <rect x="20%" y="10%" width="15%" height="90%" fill="url(#windows)" opacity="0.3"/>
      <rect x="40%" y="20%" width="12%" height="80%" fill="url(#windows)" opacity="0.3"/>
      <rect x="60%" y="15%" width="10%" height="85%" fill="url(#windows)" opacity="0.3"/>
      <rect x="75%" y="25%" width="15%" height="75%" fill="url(#windows)" opacity="0.3"/>
    </svg>
  </div>
  <div class="ground"></div>
  <div id="dogArea"></div>
  <svg class="player">
    <circle cx="20" cy="20" r="10" fill="black"/>
    <line x1="20" y1="30" x2="20" y2="60" stroke="black" stroke-width="2"/>
    <line x1="20" y1="40" x2="5" y2="50" stroke="black" stroke-width="2"/>
    <line x1="20" y1="40" x2="35" y2="50" stroke="black" stroke-width="2"/>
    <line x1="20" y1="60" x2="10" y2="75" stroke="black" stroke-width="2"/>
    <line x1="20" y1="60" x2="30" y2="75" stroke="black" stroke-width="2"/>
  </svg>
</div>

<script>
let money = 0;
let dogLimit = 3;
let dogs = [];
let pettingSpeedMultiplier = 1;
let autoCollectEnabled = false;

// Price tracking variables
let dogLimitPrice = 50;
let pettingSpeedPrice = 100;
let autoCollectPrice = 200;

// Player physics
let player = {
  x: 100,
  y: 200,
  velocityX: 0,
  velocityY: 0,
  isJumping: false
};

const GRAVITY = 0.5;
const JUMP_FORCE = -15;
const MOVE_SPEED = 5;
const GROUND_Y = 280;

// Upgrade menu functionality
const overlay = document.getElementById('overlay');
const upgradeMenu = document.getElementById('upgradeMenu');
const shopButton = document.getElementById('shop');
const closeUpgradeButton = document.getElementById('closeUpgrade');

shopButton.addEventListener('click', () => {
  overlay.classList.add('active');
  upgradeMenu.classList.add('active');
});

closeUpgradeButton.addEventListener('click', () => {
  overlay.classList.remove('active');
  upgradeMenu.classList.remove('active');
});

// Upgrade buttons
document.getElementById('upgradeDogLimit').addEventListener('click', () => {
  if (money >= dogLimitPrice) {
    money -= dogLimitPrice;
    dogLimit += 1;
    dogLimitPrice = Math.floor(dogLimitPrice * 1.5); // Increase price by 50%
    updateStats();
    updateUpgradeButtons(); // Update button text with new prices
  }
});

document.getElementById('upgradePettingSpeed').addEventListener('click', () => {
  if (money >= pettingSpeedPrice) {
    money -= pettingSpeedPrice;
    pettingSpeedMultiplier += 0.5;
    pettingSpeedPrice = Math.floor(pettingSpeedPrice * 1.5); // Increase price by 50%
    updateStats();
    updateUpgradeButtons(); // Update button text with new prices
  }
});

document.getElementById('upgradeAutoCollect').addEventListener('click', () => {
  if (money >= autoCollectPrice && !autoCollectEnabled) {
    money -= autoCollectPrice;
    autoCollectEnabled = true;
    updateStats();
    startAutoCollect();
    document.getElementById('upgradeAutoCollect').disabled = true;
    document.getElementById('upgradeAutoCollect').textContent = 'Auto-Collect Purchased!';
  }
});

// Function to update upgrade button text
function updateUpgradeButtons() {
  document.getElementById('upgradeDogLimit').textContent = 
    `Increase Dog Limit (${dogLimitPrice}$)`;
  
  document.getElementById('upgradePettingSpeed').textContent = 
    `Faster Petting Progress (${pettingSpeedPrice}$)`;
  
  if (!autoCollectEnabled) {
    document.getElementById('upgradeAutoCollect').textContent = 
      `Auto-Collect Ready Dogs (${autoCollectPrice}$)`;
  }
}

// Initial call to set button text
updateUpgradeButtons();

function startAutoCollect() {
  setInterval(() => {
    dogs.forEach(dog => {
      if (dog.petCount >= 5) {
        money += 5;
        updateStats();
        dog.petCount = 0;
      }
    });
  }, 1000);
}

function updateStats() {
  document.getElementById('money').textContent = money;
  document.getElementById('dogLimit').textContent = dogLimit;
  document.getElementById('currentDogs').textContent = dogs.length;
}

function getRandomPosition() {
  const gameContainer = document.querySelector('.game-container');
  const x = Math.random() * (gameContainer.offsetWidth - 60);
  return { x, y: GROUND_Y - 60 };
}

function updatePlayerPosition() {
  player.velocityY += GRAVITY;
  player.y += player.velocityY;
  player.x += player.velocityX;
  
  if (player.y > GROUND_Y) {
    player.y = GROUND_Y;
    player.velocityY = 0;
    player.isJumping = false;
  }
  
  if (player.x < 0) player.x = 0;
  if (player.x > 760) player.x = 760;
  
  document.querySelector('.player').style.transform = `translate(${player.x}px, ${player.y}px)`;
}

function moveDogs() {
  dogs.forEach(dog => {
    let currentX = parseFloat(dog.style.left);
    let direction = dog.direction || 1;
    
    currentX += direction * 2;
    
    if (currentX > 740 || currentX < 0) {
      direction *= -1;
      dog.direction = direction;
    }
    
    dog.style.left = `${currentX}px`;
  });
}

function createDog() {
  if (dogs.length >= dogLimit) return;
  
  const dog = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  dog.setAttribute("viewBox", "0 0 100 100");
  dog.classList.add("dog");
  
  const colors = ["#8B4513", "#D2691E", "#CD853F", "#DEB887"];
  const color = colors[Math.floor(Math.random() * colors.length)];
  
  dog.innerHTML = `
    <circle cx="50" cy="50" r="30" fill="${color}"/>
    <circle cx="35" cy="40" r="5" fill="black"/>
    <circle cx="65" cy="40" r="5" fill="black"/>
    <path d="M 45 60 Q 50 65 55 60" stroke="black" fill="none" stroke-width="2"/>
    <circle cx="25" cy="30" r="10" fill="${color}"/>
    <circle cx="75" cy="30" r="10" fill="${color}"/>
  `;
  
  const pos = getRandomPosition();
  dog.style.left = `${pos.x}px`;
  dog.style.top = `${pos.y}px`;
  dog.direction = Math.random() < 0.5 ? 1 : -1;
  
  dog.petCount = 0;
  dog.addEventListener('click', () => {
    dog.petCount += pettingSpeedMultiplier;
    dog.style.transform = 'scale(1.2)';
    setTimeout(() => dog.style.transform = '', 200);
    
    if (dog.petCount >= 5) {
      money += 5;
      dog.petCount = 0;
      updateStats();
    }
  });
  
  dogs.push(dog);
  document.getElementById('dogArea').appendChild(dog);
  updateStats();
}

document.addEventListener('keydown', (e) => {
  switch(e.key) {
    case 'ArrowLeft':
      player.velocityX = -MOVE_SPEED;
      break;
    case 'ArrowRight':
      player.velocityX = MOVE_SPEED;
      break;
    case 'ArrowUp':
    case ' ':
      if (!player.isJumping) {
        player.velocityY = JUMP_FORCE;
        player.isJumping = true;
      }
      break;
  }
});

document.addEventListener('keyup', (e) => {
  if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
    player.velocityX = 0;
  }
});

document.getElementById('sellBin').addEventListener('click', () => {
  if (dogs.length > 0) {
    const lastDog = dogs.pop();
    lastDog.remove();
    money += 10;
    updateStats();
  }
});

function gameLoop() {
  updatePlayerPosition();
  moveDogs();
  requestAnimationFrame(gameLoop);
}

for (let i = 0; i < 2; i++) {
  createDog();
}

setInterval(() => {
  if (dogs.length < dogLimit && Math.random() < 0.3) {
    createDog();
  }
}, 2000);

updateStats();
gameLoop();
</script></body></html>